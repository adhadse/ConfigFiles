import { expect } from 'chai';
import { ContextCommandManager } from './command_manager';
import { BrowserConsole } from './virtual/console';
describe('ContextMenuCommandManager', () => {
    class ManagerImplementation extends ContextCommandManager {
        constructor(options) {
            super(Object.assign({ app: null, adapter_manager: null, palette: null, tracker: null, suffix: null, entry_point: null, console: new BrowserConsole() }, options));
        }
        get_rank(command) {
            return super.get_rank(command);
        }
        get current_adapter() {
            return undefined;
        }
    }
    let manager;
    let base_command = {
        id: 'cmd',
        execute: () => {
            // nothing here yet
        },
        is_enabled: () => {
            return true;
        },
        label: 'Command'
    };
    describe('#get_rank()', () => {
        it('uses in-group (relative) positioning by default', () => {
            manager = new ManagerImplementation({
                selector: 'body',
                rank_group: 0,
                rank_group_size: 5
            });
            let rank = manager.get_rank(base_command);
            expect(rank).to.equal(0);
            rank = manager.get_rank(Object.assign(Object.assign({}, base_command), { rank: 1 }));
            expect(rank).to.equal(1 / 5);
            manager = new ManagerImplementation({
                selector: 'body',
                rank_group: 1,
                rank_group_size: 5
            });
            rank = manager.get_rank(Object.assign(Object.assign({}, base_command), { rank: 1 }));
            expect(rank).to.equal(1 + 1 / 5);
            manager = new ManagerImplementation({
                selector: 'body'
            });
            rank = manager.get_rank(base_command);
            expect(rank).to.equal(Infinity);
        });
    });
    it('respects is_rank_relative value', () => {
        manager = new ManagerImplementation({
            selector: 'body',
            rank_group: 0,
            rank_group_size: 5
        });
        let rank = manager.get_rank(Object.assign(Object.assign({}, base_command), { rank: 1, is_rank_relative: false }));
        expect(rank).to.equal(1);
        rank = manager.get_rank(Object.assign(Object.assign({}, base_command), { rank: 1, is_rank_relative: true }));
        expect(rank).to.equal(1 / 5);
    });
});
//# sourceMappingURL=command_manager.spec.js.map