(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[410,9142],{60410:(t,e,o)=>{"use strict";o.r(e);o.d(e,{CodeJumper:()=>h,FileEditorJumper:()=>u,NotebookJumper:()=>p});const i="jumpy_history";class s{constructor(t){this.model_db=t}ensure_history_is_ready(){if(this.jump_history===undefined){if(this.model_db.has(i)){this.jump_history=this.model_db.get(i)}else{this.jump_history=this.model_db.createList(i)}}}store(t){this.ensure_history_is_ready();this.jump_history.push(JSON.stringify(t))}recollect(){this.ensure_history_is_ready();if(this.jump_history.length===0){return}let t=this.jump_history.get(this.jump_history.length-1);this.jump_history.undo();return JSON.parse(t)}}var n=o(70994);const r=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End","PageUp","PageDown"];const l=["Alt","AltGraph","Control","Shift"];const d=["F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","ContextMenu"];class h{go_to_position(t,e,o,i,s=0){let n;let r={line:i,column:o};let l=a.get(e);n=new l(t,this.document_manager);let d=n.getJumpPosition(r,s);n.jump(d)}_global_jump(t){let e=this.document_manager.openOrReveal(t.contents_path);if(!e){console.log("Widget failed to open for jump");return}let o=t.is_symlink;e.revealed.then((()=>{this.go_to_position(e,t.contents_path.endsWith(".ipynb")?"notebook":"fileeditor",t.column,t.line,t.editor_index);if(o){this.protectFromAccidentalEditing(e)}})).catch(console.warn)}protectFromAccidentalEditing(t){let e=t;let o=e.content.editor;let i=o.addKeydownHandler(((t,e)=>{if(r.indexOf(e.key)!==-1||l.indexOf(e.key)!==-1||d.indexOf(e.key)!==-1){return false}if(e.key==="c"&&e.ctrlKey){return false}let o=(0,n.showDialog)({title:"Edit external file?",body:"This file is located outside of the root of the JupyterLab start directory. "+"do you really wish to edit it?",buttons:[n.Dialog.cancelButton({label:"Cancel"}),n.Dialog.warnButton({label:"Edit anyway"})]});o.then((t=>{if(t.button.accept){i.dispose()}})).catch(console.warn);return true}))}global_jump_back(){let t=this.history.recollect();if(t){this._global_jump(t)}}global_jump(t){const e=this.getCurrentPosition();this.history.store(e);this._global_jump(t)}}let a=new Map;class u extends h{constructor(t,e){super();this.widget=t;this.document_manager=e;this.editor=t.content;this.history=new s(this.editor.model.modelDB)}get path(){return this.widget.context.path}get editors(){return[this.editor.editor]}jump(t){let{token:e}=t;let o=this.editor.editor.getPositionAt(e.offset);this.editor.editor.setSelection({start:o,end:o});this.editor.editor.focus()}getOffset(t){return this.editor.editor.getOffsetAt(t)}getJumpPosition(t){return{token:{offset:this.getOffset(t),value:""},index:0}}getCurrentPosition(){let t=this.editor.editor.getCursorPosition();return{editor_index:0,line:t.line,column:t.column,contents_path:this.editor.context.path,is_symlink:false}}}a.set("fileeditor",u);function c(t,e=false){let o=t.activeCell;if(t.mode==="edit"&&o){if(!o.editor.hasFocus()){o.editor.focus()}}if(e&&!t.node.contains(document.activeElement)){t.node.focus()}}class p extends h{constructor(t,e){super();this.widget=t;this.notebook=t.content;this.history=new s(this.notebook.model.modelDB);this.document_manager=e}get editors(){return this.notebook.widgets.map((t=>t.editor))}jump(t){let{token:e,index:o}=t;setTimeout((()=>{this.notebook.deselectAll();this.notebook.activeCellIndex=o;c(this.notebook);this.notebook.mode="edit";let t=this.notebook.activeCell.editor;let i=t.getPositionAt(e.offset);t.setSelection({start:i,end:i})}),0)}getOffset(t,e=0){return this.editors[e].getOffsetAt(t)}getCurrentPosition(){let t=this.editors[this.notebook.activeCellIndex].getCursorPosition();return{editor_index:this.notebook.activeCellIndex,line:t.line,column:t.column,contents_path:this.widget.context.path,is_symlink:false}}getJumpPosition(t,e){return{token:{offset:this.getOffset(t,e),value:""},index:e}}}a.set("notebook",p)}}]);
//# sourceMappingURL=410.907365760367835fecb5.js.map?v=907365760367835fecb5